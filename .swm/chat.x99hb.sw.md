---
id: x99hb
title: Chat
file_version: 1.1.2
app_version: 1.8.5
---

these are the use states that I am using for chat and setting the message
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/Chat.js
```javascript
5        const [chat, setChat] = useState([]);
6        const [messages, setMessages] = useState("");
```

<br/>

This code will handle chat useState which will store whatever messages come into the stream
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/Chat.js
```javascript
10       useEffect(() => {
11         const savedChat = localStorage.getItem("chat");
12     
13         if (savedChat) {
14           setChat(JSON.parse(savedChat));
15           console.log(savedChat);
16         }
17         client.on("message", (channel, context, msg) => {
18           const color = context.color;
19           const newChat = {
20             user: context.username,
21             text: msg,
22             color,
23           };
24           setChat((prevChat) => {
25             const updatedChat = [...prevChat, newChat];
26             localStorage.setItem("chat", JSON.stringify(updatedChat));
27             return updatedChat;
28           });
29     
30           console.log(savedChat);
31         });
32       }, []);
```

<br/>

First I created a way to save chat messages through local storage and then check if there is a saved chat to set the current chat to that saved one. client on message will then handle what messages come in and update the saved chat and current chat.

<br/>

This code handles sending messages to chat from the front end.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/Chat.js
```javascript
34       const sendMessage = (e) => {
35         e.preventDefault();
36         if (messages === "") {
37           return;
38         }
39         client.say("sinsofaninja", messages);
40         setMessages("");
41       };
```

<br/>

This code snip handles the messages being displayed from useState chat and sending messages using the sendMessage function.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/Chat.js
```javascript
44         <div>
45           <div className="chatWindow">
46             {chat.map((msg, index) => (
47               <div key={index}>
48                 <strong style={{ color: msg.color }}>{msg.user}: </strong>
49                 <span>{msg.text}</span>
50               </div>
51             ))}
52           </div>
53           <form onSubmit={sendMessage}>
54             <input
55               type="text"
56               placeholder="Type a message"
57               value={messages}
58               onChange={(e) => setMessages(e.target.value)}
59             />
60             <button type="submit">Send</button>
61           </form>
62         </div>
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBdHdpdGNoLWJvdC1yZWFjdCUzQSUzQW1zYXdsYW5p/docs/x99hb).
